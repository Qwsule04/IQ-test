<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IQ тест</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #0f0f23;
            min-height: 100vh;
            color: #e8e8e8;
            overflow-x: hidden;
        }

        .background-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(45deg, #0f0f23 0%, #1a1a3a 50%, #0f0f23 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }

        .background-animation::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 50%, rgba(120, 53, 255, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 50%, rgba(255, 119, 198, 0.1) 0%, transparent 50%);
            animation: float 20s ease-in-out infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .container {
            background: rgba(22, 22, 40, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            max-width: 1400px;
            width: 95%;
            margin: 20px auto;
            overflow: hidden;
            box-shadow: 0 32px 64px rgba(0, 0, 0, 0.4), 
                        0 0 0 1px rgba(255, 255, 255, 0.05);
            animation: slideIn 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(40px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .header {
            background: linear-gradient(135deg, rgba(120, 53, 255, 0.2) 0%, rgba(255, 119, 198, 0.2) 100%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 40px;
            text-align: center;
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #7835ff 0%, #ff77c6 100%);
            opacity: 0.1;
            z-index: -1;
        }

        .header h1 {
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 12px;
            background: linear-gradient(135deg, #7835ff 0%, #ff77c6 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.8;
            font-weight: 400;
        }

        .progress-container {
            margin-top: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            background: linear-gradient(90deg, #7835ff 0%, #ff77c6 100%);
            height: 100%;
            border-radius: 4px;
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            width: 0%;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .progress-text {
            text-align: center;
            margin-top: 15px;
            font-weight: 600;
            font-size: 1rem;
            color: #e8e8e8;
        }

        .test-content {
            padding: 60px;
            display: flex;
            gap: 60px;
            align-items: flex-start;
            min-height: 600px;
        }

        .question-side {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .question-number {
            font-size: 1.4rem;
            font-weight: 600;
            color: #7835ff;
            margin-bottom: 30px;
            padding: 12px 24px;
            background: rgba(120, 53, 255, 0.1);
            border: 1px solid rgba(120, 53, 255, 0.3);
            border-radius: 50px;
        }

        .matrix-container {
            width: 100%;
            max-width: 450px;
            aspect-ratio: 1;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.02);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .matrix-container:hover {
            border-color: rgba(120, 53, 255, 0.4);
            box-shadow: 0 20px 40px rgba(120, 53, 255, 0.15);
        }

        .matrix-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: transform 0.3s ease;
        }

        .placeholder-matrix {
            color: rgba(255, 255, 255, 0.5);
            font-size: 1.1rem;
            text-align: center;
            padding: 40px;
            line-height: 1.6;
        }

        .answers-side {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .answers-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #e8e8e8;
            margin-bottom: 30px;
            text-align: center;
        }

        .answers-grid {
            display: grid;
            gap: 16px;
            margin-bottom: 40px;
        }

        .answers-grid.six-options {
            grid-template-columns: repeat(3, 1fr);
        }

        .answers-grid.eight-options {
            grid-template-columns: repeat(4, 1fr);
        }

        .answer-button {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 1.3rem;
            font-weight: 600;
            color: #e8e8e8;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .answer-button:hover {
            background: rgba(120, 53, 255, 0.15);
            border-color: rgba(120, 53, 255, 0.4);
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(120, 53, 255, 0.25);
        }

        .answer-button.selected {
            background: linear-gradient(135deg, rgba(120, 53, 255, 0.3), rgba(255, 119, 198, 0.3));
            border-color: #7835ff;
            color: white;
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(120, 53, 255, 0.4);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        .nav-button {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            color: #e8e8e8;
            border: 2px solid rgba(255, 255, 255, 0.2);
            padding: 16px 32px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }

        .nav-button:hover {
            background: linear-gradient(135deg, rgba(120, 53, 255, 0.2), rgba(255, 119, 198, 0.2));
            border-color: rgba(120, 53, 255, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(120, 53, 255, 0.3);
        }

        .nav-button:disabled {
            background: rgba(255, 255, 255, 0.02);
            border-color: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.3);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .finish-button {
            background: linear-gradient(135deg, #00d4aa 0%, #7835ff 100%);
            border-color: transparent;
            color: white;
            padding: 18px 36px;
            font-size: 1.1rem;
            font-weight: 700;
        }

        .finish-button:hover {
            background: linear-gradient(135deg, #00e6c0 0%, #8a4dff 100%);
            box-shadow: 0 12px 24px rgba(0, 212, 170, 0.4);
        }

        .result-container {
            text-align: center;
            padding: 80px 60px;
            background: linear-gradient(135deg, rgba(120, 53, 255, 0.05), rgba(255, 119, 198, 0.05));
        }

        .result-header {
            margin-bottom: 40px;
        }

        .result-title {
            font-size: 2.2rem;
            font-weight: 700;
            color: #e8e8e8;
            margin-bottom: 16px;
        }

        .result-scores {
            display: flex;
            justify-content: center;
            gap: 60px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .score-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            min-width: 180px;
        }

        .score-value {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .iq-score {
            background: linear-gradient(135deg, #7835ff 0%, #ff77c6 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .correct-score {
            color: #00d4aa;
        }

        .score-label {
            font-size: 0.9rem;
            opacity: 0.7;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .result-interpretation {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
        }

        .interpretation-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #7835ff;
        }

        .interpretation-text {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #e8e8e8;
        }

        .restart-button {
            background: linear-gradient(135deg, #7835ff 0%, #ff77c6 100%);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .restart-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 16px 32px rgba(120, 53, 255, 0.4);
        }

        @media (max-width: 1024px) {
            .test-content {
                flex-direction: column;
                padding: 40px;
                gap: 40px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }

            .result-scores {
                gap: 30px;
            }
        }

        @media (max-width: 768px) {
            .container {
                width: 98%;
                margin: 10px auto;
            }

            .header {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }

            .test-content {
                padding: 30px 20px;
            }
            
            .answers-grid.six-options {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .answers-grid.eight-options {
                grid-template-columns: repeat(2, 1fr);
            }

            .result-container {
                padding: 40px 20px;
            }

            .result-scores {
                flex-direction: column;
                gap: 20px;
                align-items: center;
            }

            .navigation {
                flex-direction: column;
                gap: 15px;
            }

            .nav-button {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="background-animation"></div>
    
    <div class="container">
        <div class="header">
            <h1>IQ тест</h1>
            <p>Стандартизированный тест для оценки уровня интеллекта</p>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">Вопрос 1 из 60</div>
            </div>
        </div>

        <div id="testContent" class="test-content">
            <div class="question-side">
                <div class="question-number" id="questionNumber">Вопрос 1</div>
                <div class="matrix-container">
                    <img id="matrixImage" class="matrix-image" style="display: none;" alt="Матрица">
                    <div id="matrixPlaceholder" class="placeholder-matrix">
                        Загрузите изображение матрицы<br>
                        <strong>Формат: A1.png, B5.png, C12.png</strong>
                    </div>
                </div>
            </div>

            <div class="answers-side">
                <div class="answers-title">Выберите правильный ответ</div>
                <div id="answersGrid" class="answers-grid six-options">
                    <!-- Кнопки ответов будут созданы динамически -->
                </div>
                <div class="navigation">
                    <button id="prevButton" class="nav-button" onclick="previousQuestion()">← Назад</button>
                    <button id="nextButton" class="nav-button" onclick="nextQuestion()">Далее →</button>
                    <button id="finishButton" class="nav-button finish-button" onclick="finishTest()" style="display: none;">Завершить тест</button>
                </div>
            </div>
        </div>

        <div id="resultContainer" class="result-container" style="display: none;">
            <div class="result-header">
                <div class="result-title">Результаты теста</div>
            </div>
            
            <div class="result-scores">
                <div class="score-item">
                    <div class="score-value iq-score" id="iqScore">120</div>
                    <div class="score-label">Уровень IQ</div>
                </div>
                <div class="score-item">
                    <div class="score-value correct-score" id="correctScore">45/60</div>
                    <div class="score-label">Правильных ответов</div>
                </div>
            </div>
            
            <div class="result-interpretation">
                <div class="interpretation-title" id="interpretationTitle">Высокий уровень интеллекта</div>
                <div class="interpretation-text" id="interpretationText">
                    Ваш результат значительно превышает средние показатели популяции.
                </div>
            </div>
            
          
        </div>
    </div>

    <script>
        // Правильные ответы из таблицы
        const correctAnswers = {
            'A': [4, 5, 1, 2, 6, 3, 6, 2, 1, 3, 4, 5],
            'B': [2, 6, 1, 2, 1, 3, 5, 6, 4, 3, 4, 5],
            'C': [8, 2, 3, 8, 7, 4, 5, 1, 7, 6, 1, 2],
            'D': [3, 4, 3, 7, 8, 6, 5, 4, 1, 2, 5, 6],
            'E': [7, 6, 8, 2, 1, 5, 1, 6, 3, 2, 4, 5]
        };

        // Таблица соответствия баллов и IQ
        const scoreToIQ = {
            0: 70, 5: 75, 10: 80, 15: 85, 20: 88, 25: 90, 30: 92, 35: 95, 40: 97, 42: 98,
            43: 99, 44: 100, 45: 102, 46: 104, 47: 106, 48: 108, 49: 110,
            50: 112, 51: 114, 52: 116, 53: 118, 54: 120, 55: 122, 56: 124,
            57: 126, 58: 128, 59: 130, 60: 140
        };

        let currentQuestion = 1;
        let currentSeries = 'A';
        let currentSeriesQuestion = 1;
        let userAnswers = {};
        let totalQuestions = 60;

        function getIQFromScore(score) {
            let closestScore = 0;
            for (let tableScore in scoreToIQ) {
                if (parseInt(tableScore) <= score) {
                    closestScore = parseInt(tableScore);
                }
            }
            return scoreToIQ[closestScore] || 70;
        }

        function getInterpretation(iq) {
            if (iq >= 130) {
                return {
                    title: "Исключительно высокий уровень",
                    text: "Ваш результат находится в верхних 2% популяции. Это указывает на выдающиеся способности к логическому мышлению и решению сложных задач."
                };
            } else if (iq >= 121) {
                return {
                    title: "Очень высокий уровень",
                    text: "Ваш результат значительно превышает средние показатели. Вы обладаете отличными аналитическими способностями."
                };
            } else if (iq >= 112) {
                return {
                    title: "Выше среднего",
                    text: "Ваш результат превышает средний уровень популяции. У вас хорошо развиты способности к абстрактному мышлению."
                };
            } else if (iq >= 101) {
                return {
                    title: "Нормальный уровень",
                    text: "Ваш результат соответствует среднему уровню популяции. Это показывает стабильные когнитивные способности."
                };
            } else if (iq >= 90) {
                return {
                    title: "Средний уровень",
                    text: "Ваш результат находится в пределах нормы."
                };
            } else {
                return {
                    title: "Ниже среднего",
                    text: "Ваш результат находятся ниже среднего значения."
                };
            }
        }

        function initializeTest() {
            createAnswerButtons();
            updateQuestion();
            updateProgress();
        }

        function createAnswerButtons() {
            const answersGrid = document.getElementById('answersGrid');
            const optionsCount = (currentSeries === 'A' || currentSeries === 'B') ? 6 : 8;
            
            answersGrid.className = `answers-grid ${optionsCount === 6 ? 'six-options' : 'eight-options'}`;
            answersGrid.innerHTML = '';

            for (let i = 1; i <= optionsCount; i++) {
                const button = document.createElement('button');
                button.className = 'answer-button';
                button.textContent = i;
                button.onclick = () => selectAnswer(i);
                answersGrid.appendChild(button);
            }
        }

        function updateQuestion() {
            const series = ['A', 'B', 'C', 'D', 'E'];
            const seriesIndex = Math.floor((currentQuestion - 1) / 12);
            const questionInSeries = ((currentQuestion - 1) % 12) + 1;
            
            currentSeries = series[seriesIndex];
            currentSeriesQuestion = questionInSeries;

            document.getElementById('questionNumber').textContent = `Серия ${currentSeries} — Вопрос ${currentSeriesQuestion}`;
            
            const imageName = `${currentSeries}${currentSeriesQuestion}.png`;
            const matrixImage = document.getElementById('matrixImage');
            const placeholder = document.getElementById('matrixPlaceholder');
            
            matrixImage.src = `images/${imageName}`;
            matrixImage.onload = function() {
                matrixImage.style.display = 'block';
                placeholder.style.display = 'none';
            };
            matrixImage.onerror = function() {
                matrixImage.style.display = 'none';
                placeholder.style.display = 'block';
                placeholder.innerHTML = `Загрузите изображение:<br><strong>${imageName}</strong><br><small>в папку images/</small>`;
            };

            const needsRecreate = (currentSeries === 'C' && currentSeriesQuestion === 1) ||
                                 (currentSeries === 'A' && currentSeriesQuestion === 1);
            if (needsRecreate) {
                createAnswerButtons();
            }

            const selectedAnswer = userAnswers[currentQuestion];
            const answerButtons = document.querySelectorAll('.answer-button');
            answerButtons.forEach(button => {
                button.classList.remove('selected');
                if (selectedAnswer && parseInt(button.textContent) === selectedAnswer) {
                    button.classList.add('selected');
                }
            });

            document.getElementById('prevButton').disabled = currentQuestion === 1;
            document.getElementById('nextButton').style.display = currentQuestion === totalQuestions ? 'none' : 'block';
            document.getElementById('finishButton').style.display = currentQuestion === totalQuestions ? 'block' : 'none';
        }

        function updateProgress() {
            const progress = (currentQuestion / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `Вопрос ${currentQuestion} из ${totalQuestions}`;
        }

        function selectAnswer(answer) {
            userAnswers[currentQuestion] = answer;
            
            const answerButtons = document.querySelectorAll('.answer-button');
            answerButtons.forEach(button => {
                button.classList.remove('selected');
                if (parseInt(button.textContent) === answer) {
                    button.classList.add('selected');
                }
            });
        }

        function nextQuestion() {
            if (currentQuestion < totalQuestions) {
                currentQuestion++;
                updateQuestion();
                updateProgress();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 1) {
                currentQuestion--;
                updateQuestion();
                updateProgress();
            }
        }

        function finishTest() {
            let correctCount = 0;
            let totalAnswered = 0;

            for (let q = 1; q <= totalQuestions; q++) {
                if (userAnswers[q] !== undefined) {
                    totalAnswered++;
                    
                    const series = ['A', 'B', 'C', 'D', 'E'];
                    const seriesIndex = Math.floor((q - 1) / 12);
                    const questionInSeries = ((q - 1) % 12) + 1;
                    const currentSeriesForQ = series[seriesIndex];
                    
                    if (userAnswers[q] === correctAnswers[currentSeriesForQ][questionInSeries - 1]) {
                        correctCount++;
                    }
                }
            }

            showResult(correctCount, totalAnswered);
        }

        function showResult(correctCount, totalAnswered) {
            const iq = getIQFromScore(correctCount);
            const interpretation = getInterpretation(iq);
            
            document.getElementById('testContent').style.display = 'none';
            document.getElementById('resultContainer').style.display = 'block';
            
            document.getElementById('iqScore').textContent = iq;
            document.getElementById('correctScore').textContent = `${correctCount}/${totalAnswered}`;
            document.getElementById('interpretationTitle').textContent = interpretation.title;
            document.getElementById('interpretationText').textContent = interpretation.text;
        }

        function restartTest() {
            currentQuestion = 1;
            currentSeries = 'A';
            currentSeriesQuestion = 1;
            userAnswers = {};
            
            document.getElementById('testContent').style.display = 'flex';
            document.getElementById('resultContainer').style.display = 'none';
            
            updateQuestion();
            updateProgress();
        }

        window.onload = function() {
            initializeTest();
        };
    </script>
</body>
</html>
